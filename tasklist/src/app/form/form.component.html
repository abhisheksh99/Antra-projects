<h1>Registration Form</h1>

<form [formGroup]="userForm" (ngSubmit)="onSubmit()" novalidate>

  <label>Username</label>
  <input type="text" formControlName="username" placeholder="Enter your name" />
  <div class="error" *ngIf="f['username'].touched && f['username'].invalid">
    <small *ngIf="f['username'].errors?.['required'] || f['username'].errors?.['minlength']">
      Username is required and should be at least 3 characters long.
    </small>
    <small *ngIf ="f['username'].errors?.['usernameTaken']">
        Username is already taken.
    </small>
  </div>

  <label>Password</label>
  <input type="password" formControlName="password" placeholder="Enter password" />
  <div class="error" *ngIf="f['password'].touched && f['password'].invalid">
    <small *ngIf="f['password'].errors?.['required'] || f['password'].errors?.['minlength']">
      Password is required and should be at least 6 characters long.
    </small>
  </div>

 
  <label>Confirm Password</label>
  <input type="password" formControlName="confirmPassword" placeholder="Re-enter password" />
  <div class="error" *ngIf="userForm.hasError('passwordMismatch') && (f['confirmPassword'].dirty || f['confirmPassword'].touched)">
    <small>Passwords do not match.</small>
  </div>

  

  <label>Email</label>
  <input type="email" formControlName="email" />
  <div
    class="error"
    *ngIf="f['email'].touched && f['email'].invalid && f['preferredContact'].value === 'email'">
    <small *ngIf="f['email'].errors?.['required'] || f['email'].errors?.['email']">
      Please enter a valid email.
    </small>
  </div>

 
  <label>Phone Number</label>
  <input type="tel" formControlName="phone" />
  <div
    class="error"
    *ngIf="f['phone'].touched && f['phone'].invalid && f['preferredContact'].value === 'phone'">
    <small *ngIf="f['phone'].errors?.['required']">
      Phone Number is required when Phone is selected.
    </small>
  </div>

  <label>Preferred Contact</label>
  <select formControlName="preferredContact">
    <option value="">-- Select --</option>
    <option value="email">Email</option>
    <option value="phone">Phone</option>
  </select>

  <div class="error" *ngIf="userForm.hasError('contactMissing') && (userForm.dirty || userForm.touched)">
    <small>Please select a preferred contact method.</small>
  </div>


  
  <button type="submit" [disabled]="userForm.invalid">Save</button>
</form>
